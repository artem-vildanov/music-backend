import{P as w}from"./PlaylistCard--LevWLeD.js";import{A as S,D as M,E as C,s as P,u as V,m as x,f as v,_ as k,r as c,o as I,c as T,b as o,d as l,t as _,i as g,j as L,g as F,w as p,n as m,x as G,p as R,e as E,y as H}from"./index-BCrCh3O-.js";import{_ as B,a as D}from"./not_liked-CjpSLIKd.js";import{_ as b}from"./edit-CJGwvuct.js";const Z="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='%23000000'%20class='bi%20bi-three-dots'%3e%3cpath%20d='M3%209.5a1.5%201.5%200%201%201%200-3%201.5%201.5%200%200%201%200%203zm5%200a1.5%201.5%200%201%201%200-3%201.5%201.5%200%200%201%200%203zm5%200a1.5%201.5%200%201%201%200-3%201.5%201.5%200%200%201%200%203z'/%3e%3c/svg%3e",$="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20stroke='%23000000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='M7%2024.269V9.73C7%208.223%208.753%207.44%209.83%208.465l7.632%207.269a1.758%201.758%200%20010%202.532L9.83%2025.535C8.753%2026.56%207%2025.777%207%2024.269z'/%3e%3cpath%20stroke='%23000000'%20stroke-linecap='round'%20stroke-width='2'%20d='M23%205v8M19%209h8'/%3e%3c/g%3e%3c/svg%3e",O="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M16%205H4V7H16V5Z'%20fill='%23000000'%20/%3e%3cpath%20d='M16%209H4V11H16V9Z'%20fill='%23000000'%20/%3e%3cpath%20d='M4%2013H12V15H4V13Z'%20fill='%23000000'%20/%3e%3cpath%20d='M20%2016L14%2013V19L20%2016Z'%20fill='%23000000'%20/%3e%3c/svg%3e",U="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M15.9644%204.63379H3.96442V6.63379H15.9644V4.63379Z'%20fill='%23000000'%20/%3e%3cpath%20d='M15.9644%208.63379H3.96442V10.6338H15.9644V8.63379Z'%20fill='%23000000'%20/%3e%3cpath%20d='M3.96442%2012.6338H11.9644V14.6338H3.96442V12.6338Z'%20fill='%23000000'%20/%3e%3cpath%20d='M12.9645%2013.7093L14.3787%2012.295L16.5%2014.4163L18.6213%2012.2951L20.0355%2013.7093L17.9142%2015.8305L20.0356%2017.9519L18.6214%2019.3661L16.5%2017.2447L14.3786%2019.3661L12.9644%2017.9519L15.0858%2015.8305L12.9645%2013.7093Z'%20fill='%23000000'%20/%3e%3c/svg%3e",q={name:"SongCard",components:{PlaylistCard:w,AddToPlaylist:S,DeleteFromPlaylist:M,EditSong:C},props:["songProps"],data(){return{song:this.songProps,imageError:null,photoSrc:`http://music.local:9005/photo/${this.songProps.photoPath}`,userInfo:this.$parent.userInfo}},computed:{...P(["getCurrentSong"]),songCardSelection(){if(this.getCurrentSong&&this.getCurrentSong.id===this.song.id)return"selected-song"}},methods:{...V(["enqueueSong"]),...x({playSongMakeQueue:"playSong"}),playSong(){const e=this.song.id,s=this.$parent.$data.songsCollection;this.playSongMakeQueue({songId:e,songsCollection:s}).catch(i=>console.log(i.message))},openModalEditSong(){this.openModal("editSongModalOverlay","editSongModal")},openModalAddToPlaylist(){const e="addToPlaylistModalOverlay",s="addToPlaylistModal";this.$refs.addToPlaylistRef.getUserPlaylists(),this.openModal(e,s)},openModalDeleteFromPlaylists(){const e="deleteFromPlaylistModalOverlay",s="deleteFromPlaylistModal";this.$refs.deleteFromPlaylistRef.getUserPlaylists(),this.openModal(e,s)},openModal(e,s){const i=document.getElementById(`song_${this.song.id}`).querySelector(`#${s}`);i.style.visibility="visible",i.style.opacity="1",setTimeout(()=>{this.overlayClickListener(e,s)},500)},overlayClickListener(e,s){document.getElementById(`song_${this.song.id}`).querySelector(`#${e}`).addEventListener("click",this.hideModal(e,s))},hideModal(e,s){return()=>{const a=document.getElementById(`song_${this.song.id}`),i=a.querySelector(`#${e}`),t=a.querySelector(`#${s}`);t.style.visibility="hidden",t.style.opacity="0",i.removeEventListener("click",this.hideModal(e,s))}},addToFavourites(){v.put(`http://music.local/api/favourite/songs/add-to-favourites/${this.song.id}`),this.song.isFavourite=!0},removeFromFavourites(){v.put(`http://music.local/api/favourite/songs/delete-from-favourites/${this.song.id}`),this.song.isFavourite=!1}}},r=e=>(R("data-v-f35f3f78"),e=e(),E(),e),z=["id"],A={class:"song-photo-container"},N={class:"song-photo-overlay"},j=r(()=>o("img",{class:"icon select-none",src:H},null,-1)),Q=[j],W=["src"],Y={class:"song-info-container"},J=["title"],K={class:"song-actions-container"},X={class:"song-action"},oo={tabindex:"0",class:"song-action open-hidden-actions"},so=r(()=>o("img",{class:"icon",src:Z},null,-1)),eo={class:"hidden-actions-container"},to={class:"song-action hidden-action"},io={class:"song-action hidden-action"},no={class:"song-action hidden-action"},lo={class:"song-action hidden-action"},ao={class:"modal",id:"addToPlaylistModal"},ro=r(()=>o("div",{class:"modal__overlay",id:"addToPlaylistModalOverlay"},null,-1)),co={class:"modal__window"},go={class:"modal",id:"deleteFromPlaylistModal"},po=r(()=>o("div",{class:"modal__overlay",id:"deleteFromPlaylistModalOverlay"},null,-1)),mo={class:"modal__window"},vo={class:"modal",id:"editSongModal"},_o=r(()=>o("div",{class:"modal__overlay",id:"editSongModalOverlay"},null,-1)),ho={class:"modal__window"};function uo(e,s,a,i,t,n){const h=c("router-link"),u=c("add-to-playlist"),y=c("delete-from-playlist"),f=c("edit-song");return I(),T("div",{class:G(`song-card ${n.songCardSelection}`),id:`song_${t.song.id}`},[o("div",A,[o("div",N,[o("div",{onClick:s[0]||(s[0]=l(d=>n.playSong(),["prevent"])),class:"play-audio-action"},Q)]),o("img",{class:"song-photo select-none",src:t.photoSrc},null,8,W)]),o("div",Y,[o("div",{title:t.song.name,class:"song-name"},_(t.song.name),9,J),g(h,{to:{name:"artist.single",params:{id:t.song.artistId}},class:"artist-name"},{default:L(()=>[F(_(t.song.artistName),1)]),_:1},8,["to"])]),o("div",K,[o("div",X,[p(o("img",{onClick:s[1]||(s[1]=l(d=>n.removeFromFavourites(),["prevent"])),class:"icon",src:B},null,512),[[m,t.song.isFavourite]]),p(o("img",{onClick:s[2]||(s[2]=l(d=>n.addToFavourites(),["prevent"])),class:"icon",src:D},null,512),[[m,!t.song.isFavourite]])]),o("div",oo,[so,o("div",eo,[o("div",to,[o("img",{onClick:s[3]||(s[3]=l(d=>e.enqueueSong(t.song),["prevent"])),class:"centered-icon icon",src:$})]),o("div",io,[o("img",{onClick:s[4]||(s[4]=l(d=>n.openModalAddToPlaylist(),["prevent"])),class:"centered-icon icon",src:O})]),o("div",no,[o("img",{onClick:s[5]||(s[5]=l(d=>n.openModalDeleteFromPlaylists(),["prevent"])),class:"centered-icon icon",src:U})]),p(o("div",lo,[o("img",{onClick:s[6]||(s[6]=l(d=>n.openModalEditSong(),["prevent"])),class:"centered-icon icon",src:b})],512),[[m,t.userInfo&&t.song.artistId===t.userInfo.artistId]])])])]),o("div",ao,[ro,o("div",co,[g(u,{ref:"addToPlaylistRef",song:t.song},null,8,["song"])])]),o("div",go,[po,o("div",mo,[g(y,{ref:"deleteFromPlaylistRef",song:t.song},null,8,["song"])])]),o("div",vo,[_o,o("div",ho,[g(f,{song:t.song},null,8,["song"])])])],10,z)}const Mo=k(q,[["render",uo],["__scopeId","data-v-f35f3f78"]]);export{Mo as S};
